# é…ç½®æ–‡ä»¶æ¸…ç†æŠ¥å‘Šï¼ˆæœ€ç»ˆç‰ˆï¼‰

## æ¸…ç†æ—¶é—´
2025-10-28

## æœ€ç»ˆé…ç½®ç»“æ„

```
config/
â”œâ”€â”€ shared/                          # âœ… å…¨å±€å…±äº«é…ç½®ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ calculations.yaml           # è®¡ç®—é¡¹å®šä¹‰
â”‚   â”œâ”€â”€ sensor_groups.yaml          # ä¼ æ„Ÿå™¨ç»„å®šä¹‰
â”‚   â””â”€â”€ process_stages_by_time.yaml # æ—¶é—´é˜¶æ®µåˆ†å‰²ï¼ˆâ­ æ–°ç§»å…¥ï¼‰
â”‚
â”œâ”€â”€ specifications/                  # âœ… è§„èŒƒé…ç½®ï¼ˆæŒ‰è§„èŒƒå·ç»„ç»‡ï¼‰
â”‚   â”œâ”€â”€ cps7020-n-308-vacuum/
â”‚   â”‚   â”œâ”€â”€ specification.yaml      # å·¥è‰ºå‚æ•°
â”‚   â”‚   â”œâ”€â”€ rules.yaml              # è§„åˆ™å®šä¹‰
â”‚   â”‚   â””â”€â”€ stages.yaml             # è§„åˆ™åˆ†ç»„
â”‚   â””â”€â”€ index.yaml                  # è§„èŒƒç´¢å¼•
â”‚
â”œâ”€â”€ templates/                       # âœ… è§„åˆ™æ¨¡æ¿ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ pressure_rules.yaml
â”‚   â”œâ”€â”€ rate_rules.yaml
â”‚   â”œâ”€â”€ temperature_rules.yaml
â”‚   â””â”€â”€ thermocouple_rules.yaml
â”‚
â”œâ”€â”€ data_flow_config.yaml            # âœ… æ•°æ®æµé…ç½®
â”œâ”€â”€ startup_config.yaml              # âœ… å¯åŠ¨é…ç½®
â””â”€â”€ workflow_config.yaml             # âœ… å·¥ä½œæµé…ç½®
```

## é…ç½®æ–‡ä»¶åˆ†ç±»

### 1. å…¨å±€å…±äº«é…ç½®ï¼ˆshared/ï¼‰
- **calculations.yaml** - è®¡ç®—é¡¹å®šä¹‰ï¼ˆè¢‹å†…å‹ã€ç½å‹ã€çƒ­ç”µå¶ç­‰ï¼‰
- **sensor_groups.yaml** - ä¼ æ„Ÿå™¨ç»„å®šä¹‰ï¼ˆVACUUM_PRESS, CURING_PRESSç­‰ï¼‰
- **process_stages_by_time.yaml** - æ—¶é—´é˜¶æ®µåˆ†å‰²ï¼ˆâ­ æ–°ç§»å…¥ï¼‰

**ä½œç”¨**ï¼šæ‰€æœ‰è§„èŒƒå…±äº«çš„åŸºç¡€é…ç½®

### 2. è§„èŒƒç‰¹å®šé…ç½®ï¼ˆspecifications/ï¼‰
- **specification.yaml** - å·¥è‰ºå‚æ•°ï¼ˆå‹åŠ›èŒƒå›´ã€æ¸©åº¦èŒƒå›´ã€é€Ÿç‡ç­‰ï¼‰
- **rules.yaml** - è§„åˆ™å®šä¹‰ï¼ˆå¼•ç”¨æ¨¡æ¿ï¼‰
- **stages.yaml** - è§„åˆ™åˆ†ç»„ï¼ˆå“ªäº›è§„åˆ™å±äºå“ªäº›é˜¶æ®µï¼‰

**ä½œç”¨**ï¼šæ¯ä¸ªè§„èŒƒç‹¬ç‰¹çš„å·¥è‰ºé…ç½®

### 3. è§„åˆ™æ¨¡æ¿ï¼ˆtemplates/ï¼‰
- **pressure_rules.yaml** - å‹åŠ›æ£€æŸ¥è§„åˆ™æ¨¡æ¿
- **rate_rules.yaml** - é€Ÿç‡æ£€æŸ¥è§„åˆ™æ¨¡æ¿
- **temperature_rules.yaml** - æ¸©åº¦æ£€æŸ¥è§„åˆ™æ¨¡æ¿
- **thermocouple_rules.yaml** - çƒ­ç”µå¶æ£€æŸ¥è§„åˆ™æ¨¡æ¿

**ä½œç”¨**ï¼šå¯å¤ç”¨çš„è§„åˆ™æ¨¡å¼

### 4. ç³»ç»Ÿé…ç½®ï¼ˆæ ¹ç›®å½•ï¼‰
- **startup_config.yaml** - å¯åŠ¨å‚æ•°å’Œé…ç½®æ–‡ä»¶è·¯å¾„
- **workflow_config.yaml** - å·¥ä½œæµå®šä¹‰
- **data_flow_config.yaml** - æ•°æ®æµé…ç½®

**ä½œç”¨**ï¼šç³»ç»Ÿçº§é…ç½®

## é…ç½®æ–‡ä»¶çš„ä¸¤ç§"stages"

### æ··æ·†ç‚¹æ¾„æ¸…

ç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„"stages"æ¦‚å¿µï¼š

#### 1. process_stages_by_time.yamlï¼ˆshared/ï¼‰
- **ç”¨é€”**ï¼šæ—¶é—´ç»´åº¦ - æŒ‰æ—¶é—´èŒƒå›´åˆ†å‰²æ•°æ®
- **ä½¿ç”¨**ï¼šDataChunker é˜¶æ®µæ£€æµ‹å¤„ç†å™¨
- **å†…å®¹**ï¼šæ¯ä¸ªé˜¶æ®µçš„æ—¶é—´èŒƒå›´ï¼ˆstart/end datetimeï¼‰
- **ç¤ºä¾‹**ï¼š
  ```yaml
  - id: "heating_phase"
    time_range:
      start: "2022-11-03T13:30:21"
      end: "2022-11-03T14:30:21"
  ```

#### 2. stages.yamlï¼ˆspecifications/*/ï¼‰
- **ç”¨é€”**ï¼šè§„åˆ™ç»´åº¦ - è§„åˆ™åˆ†ç»„
- **ä½¿ç”¨**ï¼šRuleEngineAnalyzer è§„åˆ™åˆ†ç»„
- **å†…å®¹**ï¼šæ¯ä¸ªé˜¶æ®µåŒ…å«å“ªäº›è§„åˆ™
- **ç¤ºä¾‹**ï¼š
  ```yaml
  - id: "heating_phase"
    rules:
      - "heating_rate_phase_1"
      - "heating_rate_phase_2"
  ```

### ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªï¼Ÿ

è¿™æ˜¯**æ—¶é—´åˆ†å‰²**å’Œ**è§„åˆ™åˆ†ç»„**çš„åˆ†ç¦»ï¼š

1. **æ—¶é—´åˆ†å‰²**ï¼ˆshared/process_stages_by_time.yamlï¼‰
   - ç”¨äºæ•°æ®åˆ†ææ—¶çš„æ—¶é—´èŒƒå›´æ£€æµ‹
   - å°†æ•°æ®æŒ‰æ—¶é—´çª—å£åˆ†å‰²

2. **è§„åˆ™åˆ†ç»„**ï¼ˆspecifications/*/stages.yamlï¼‰
   - ç”¨äºè§„åˆ™çš„ç»„ç»‡å’Œè¯„ä»·
   - å®šä¹‰å“ªäº›è§„åˆ™å±äºå“ªä¸ªä¸šåŠ¡é˜¶æ®µ

## å·²åˆ é™¤çš„æ–‡ä»¶

### 1. ææ–™é©±åŠ¨æ¶æ„ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰
```
âŒ config/materials/ï¼ˆæ•´ä¸ªç›®å½•ï¼‰
âŒ src/config/material_registry.py
âŒ test/test_material_architecture.py
```

### 2. æ—§å•ä¸€é…ç½®ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
```
âŒ config/process_specification.yaml
âŒ config/process_rules.yaml
âŒ config/process_stages_by_rule.yaml
```

### 3. é‡å¤é…ç½®ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
```
âŒ config/calculations.yaml
âŒ config/sensor_groups.yaml
```

**æ€»è®¡åˆ é™¤**: 10ä¸ªæ–‡ä»¶

## æ›´æ–°çš„é…ç½®è·¯å¾„

### startup_config.yaml

**æ›´æ–°å‰**:
```yaml
sensor_groups: "config/sensor_groups.yaml"
calculations: "config/calculations.yaml"
process_stages: "config/process_stages_by_time.yaml"
```

**æ›´æ–°å**:
```yaml
sensor_groups: "config/shared/sensor_groupsç”Ÿé•¿çš„"
calculations: "config/shared/calculations.yaml"
process_stages: " beyond/shared/process_stages_by_time.yaml"
```

## é…ç½®ç»Ÿè®¡

### æœ€ç»ˆæ–‡ä»¶åˆ†å¸ƒ

| ç±»åˆ« | æ–‡ä»¶æ•° | è·¯å¾„ |
|------|-------|------|
| å…±äº«é…ç½® | 3 | config/shared/ |
| è§„èŒƒé…ç½® | 4 | config/specifications/ |
| è§„åˆ™æ¨¡æ¿ | 4 | config/templates/ |
| ç³»ç»Ÿé…ç½® | 3 | config/ |
| **æ€»è®¡** | **14** | |

### ç›®å½•å±‚çº§

```
config/ï¼ˆ14ä¸ªæ–‡ä»¶ï¼‰
â”œâ”€â”€ shared/ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
â”œâ”€â”€ specifications/
â”‚   â”œâ”€â”€ index.yamlï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ cps7020-n-308-vacuum/ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
â”œâ”€â”€ templates/ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
â””â”€â”€ æ ¹ç›®å½•ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
```

## æ¶æ„ä¼˜åŠ¿

### 1. æ¸…æ™°çš„èŒè´£åˆ†ç¦» âœ…
- **shared/** - å…¨å±€å…±äº«
- **specifications/** - è§„èŒƒç‰¹å®š
- **templates/** - è§„åˆ™æ¨¡æ¿
- **æ ¹ç›®å½•** - ç³»ç»Ÿé…ç½®

### 2. è§„èŒƒå·é©±åŠ¨ âœ…
- æ¯ä¸ªè§„èŒƒç‹¬ç«‹ç›®å½•
- è§„èŒƒå·å”¯ä¸€æ ‡è¯†
- æ”¯æŒå¤šç‰ˆæœ¬ã€å¤šå·¥è‰º

### 3. æ˜“äºæ‰©å±• âœ…
- æ·»åŠ æ–°è§„èŒƒç”¨åŠ›å¤åˆ¶ç›®å½•
- ä¿®æ”¹è§„åˆ™ä¸å½±å“å…¶ä»–è§„èŒƒ
- æ¨¡æ¿åŒ–å‡å°‘é‡å¤

### 4. ç»´æŠ¤å‹å¥½ âœ…
- é…ç½®é›†ä¸­ç®¡ç†
- ç»“æ„æ¸…æ™°ç›´è§‚
- æ–‡ä»¶èŒè´£å•ä¸€

## éªŒè¯ç»“æœ

```bash
$ python scripts/verify_specification_config.py

[SUCCESS] æ‰€æœ‰å…³é”®é…ç½®å­˜åœ¨!

è§„èŒƒé…ç½®: 3 ä¸ªæ–‡ä»¶
æ¨¡æ¿æ–‡ä»¶: 4 ä¸ª
å…±äº«é…ç½®: 3 ä¸ª
æ€»è®¡: 10 ä¸ªé…ç½®æ–‡ä»¶
```

## æ€»ç»“

### âœ… å®Œæˆçš„ä¼˜åŒ–

1. **ç»Ÿä¸€å…±äº«é…ç½®** - æ‰€æœ‰å…±äº«é…ç½®ç§»è‡³ `config/shared/`
2. **è§„èŒƒå·é©±åŠ¨** - æŒ‰è§„èŒƒå·ç»„ç»‡é…ç½®
3. **èŒè´£åˆ†ç¦»** - æ—¶é—´åˆ†å‰²ä¸è§„åˆ™åˆ†ç»„åˆ†ç¦»
4. **å‡å°‘é‡å¤** - åˆ é™¤é‡å¤é…ç½®æ–‡ä»¶
5. **ç»“æ„æ¸…æ™°** - ç›®å½•ç»“æ„æ›´ç›´è§‚

### ğŸ“Š æ¸…ç†æ•ˆæœ

- **åˆ é™¤å‰**: 24ä¸ªé…ç½®æ–‡ä»¶
- **åˆ é™¤å**: 14ä¸ªé…ç½®æ–‡ä»¶  
- **å‡å°‘**: 42%

### ğŸ¯ ä¸‹ä¸€æ­¥

1. æ‰¹é‡ç”Ÿæˆå…¶ä»–è§„èŒƒçš„é…ç½®
2. æµ‹è¯•è§„èŒƒå·é©±åŠ¨æ¶æ„å·¥ä½œæµ
3. å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

---

**æ¸…ç†çŠ¶æ€**: âœ… å®Œæˆ  
**é…ç½®æ–‡ä»¶æ€»æ•°**: 14ä¸ª  
**ç›®å½•ç»“æ„**: âœ… ä¼˜åŒ–å®Œæˆ

